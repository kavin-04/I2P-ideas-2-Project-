<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>I2P | Ideas-2-Project</title>
    <link rel="icon" type="image/png" href="/static/i2p logo.png" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@0.468.0/dist/umd/lucide.min.js"></script>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@300;500;700&display=swap");

      :root {
        --dark-bg: #020205;
        --neon-blue: #00f0ff;
        --neon-magenta: #ff00ff;
      }

      body {
        background-color: var(--dark-bg);
        color: white;
        font-family: "Rajdhani", sans-serif;
        overflow-x: hidden;
        cursor: none;
      }

      .font-senorita { font-family: "Orbitron", sans-serif; }
      .font-negan { font-family: "Rajdhani", sans-serif; }

      /* Magic Cursor */
      #cursor {
        position: fixed;
        width: 20px;
        height: 20px;
        border: 2px solid var(--neon-blue);
        pointer-events: none;
        z-index: 9999;
        transform: translate(-50%, -50%) rotate(45deg);
      }

      /* Cube Grid Background */
      .cube-grid {
        position: fixed;
        inset: 0;
        z-index: -2;
        opacity: 0.1;
        display: grid;
        grid-template-columns: repeat(12, 1fr);
        gap: 15px;
        perspective: 1000px;
        padding: 20px;
        pointer-events: none;
      }
      .cube {
        width: 40px;
        height: 40px;
        border: 1px dashed rgba(0, 240, 255, 0.2);
        animation: rotateCube 12s infinite linear;
      }
      @keyframes rotateCube {
        from { transform: rotateX(0) rotateY(0); }
        to { transform: rotateX(360deg) rotateY(360deg); }
      }

      /* Orb Background */
      .orb-bg { position: fixed; inset: 0; z-index: -1; }
      .orb {
        position: absolute;
        width: 600px;
        height: 600px;
        border-radius: 50%;
        filter: blur(140px);
        opacity: 0.15;
        animation: drift 15s infinite alternate ease-in-out;
      }
      @keyframes drift {
        from { transform: translate(-10%, -10%); }
        to { transform: translate(30%, 20%); }
      }

      /* Technical Card */
      .tech-card {
        position: relative;
        border: 1px solid rgba(255, 255, 255, 0.08);
        background: rgba(255, 255, 255, 0.02);
        backdrop-filter: blur(10px);
        transition: border 0.3s ease, transform 0.3s ease;
        overflow: hidden;
      }
      .tech-card:hover {
        border-color: var(--neon-blue);
        transform: translateY(-5px);
      }
      .tech-card::after {
        content: "";
        position: absolute;
        inset: 0;
        pointer-events: none;
        opacity: 0;
        background: radial-gradient(600px circle at var(--x) var(--y), rgba(0, 240, 255, 0.15), transparent 40%);
        transition: opacity 0.3s;
      }
      .tech-card:hover::after { opacity: 1; }

      /* Chatbot Orb Glow */
      .chatbot-container { position: relative; width: 160px; height: 160px; }
      .chatbot-orb {
        position: absolute;
        inset: -10px;
        background: radial-gradient(circle, var(--neon-blue) 0%, transparent 70%);
        filter: blur(30px);
        opacity: 0.4;
        animation: pulse 4s infinite alternate;
        border-radius: 50%;
      }
      @keyframes pulse {
        from { transform: scale(0.9); opacity: 0.3; }
        to { transform: scale(1.1); opacity: 0.5; }
      }

      .progress-inner {
        height: 100%;
        width: 0%;
        background: linear-gradient(90deg, var(--neon-blue), var(--neon-magenta));
        box-shadow: 0 0 15px var(--neon-blue);
        transition: width 0.5s ease-in-out;
      }

      .hidden-state { display: none; opacity: 0; transform: translateY(20px); }
      .visible-state { display: flex; opacity: 1; transform: translateY(0); transition: all 0.6s ease-out; }

      /* Phase Sections Styling */
      .phase-container {
        display: flex;
        flex-direction: column;
        gap: 20px;
        width: 100%;
      }

      .phase-section {
        background: rgba(255, 255, 255, 0.03);
        border-radius: 12px;
        padding: 20px;
        border: 1px solid rgba(0, 240, 255, 0.1);
        transition: all 0.3s ease;
      }

      .phase-section:hover {
        border-color: rgba(0, 240, 255, 0.3);
        background: rgba(255, 255, 255, 0.05);
      }

      .phase-header {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 1px solid rgba(0, 240, 255, 0.2);
      }

      .phase-number {
        background: linear-gradient(135deg, var(--neon-blue), var(--neon-magenta));
        color: black;
        width: 28px;
        height: 28px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: 'Orbitron', sans-serif;
        font-weight: bold;
        font-size: 12px;
      }

      .phase-title {
        font-family: 'Orbitron', sans-serif;
        color: var(--neon-blue);
        font-size: 16px;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .phase-content {
        color: rgba(255, 255, 255, 0.85);
        line-height: 1.6;
        font-size: 14px;
        white-space: pre-wrap;
        word-wrap: break-word;
      }

      .phase-divider {
        height: 2px;
        background: linear-gradient(90deg, transparent, rgba(0, 240, 255, 0.5), transparent);
        margin: 10px 0;
      }

      /* Quick Access Toolbar */
      .quick-access-toggle {
        position: absolute;
        right: 0;
        top: 0;
        background: rgba(0, 240, 255, 0.1);
        border: 1px solid rgba(0, 240, 255, 0.3);
        border-radius: 20px;
        padding: 8px 16px;
        color: var(--neon-blue);
        font-family: 'Orbitron', sans-serif;
        font-size: 12px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
      }

      .quick-access-toggle:hover {
        background: rgba(0, 240, 255, 0.2);
        transform: scale(1.05);
      }

      .quick-access-toolbar {
        position: fixed;
        top: 100px;
        right: 20px;
        background: rgba(10, 10, 20, 0.95);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(0, 240, 255, 0.3);
        border-radius: 20px;
        padding: 20px;
        z-index: 1000;
        display: none;
        flex-direction: column;
        gap: 15px;
        min-width: 200px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        animation: slideInRight 0.3s ease-out;
      }

      @keyframes slideInRight {
        from {
          opacity: 0;
          transform: translateX(50px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      .quick-access-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
      }

      .quick-access-title {
        font-family: 'Orbitron', sans-serif;
        color: var(--neon-blue);
        font-size: 14px;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .close-toolbar {
        background: none;
        border: none;
        color: rgba(255, 255, 255, 0.5);
        cursor: pointer;
        padding: 5px;
        border-radius: 50%;
        transition: all 0.3s ease;
      }

      .close-toolbar:hover {
        color: var(--neon-magenta);
        background: rgba(255, 0, 255, 0.1);
      }

      .tool-icon {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 16px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        color: white;
      }

      .tool-icon:hover {
        background: rgba(0, 240, 255, 0.1);
        border-color: var(--neon-blue);
        transform: translateX(-5px);
      }

      .tool-icon i {
        color: var(--neon-blue);
        transition: all 0.3s ease;
      }

      .tool-icon:hover i {
        color: var(--neon-magenta);
        transform: scale(1.2);
      }

      .tool-name {
        font-family: 'Rajdhani', sans-serif;
        font-weight: 500;
        font-size: 14px;
      }

      .tool-subtext {
        font-size: 11px;
        color: rgba(255, 255, 255, 0.5);
        margin-top: 2px;
      }

      /* Business Badges */
      .business-badge {
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 11px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        display: inline-flex;
        align-items: center;
        gap: 4px;
      }

      /* Toast Notification */
      .toast {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: rgba(10, 10, 20, 0.95);
        backdrop-filter: blur(20px);
        border: 1px solid var(--neon-blue);
        border-radius: 12px;
        padding: 12px 20px;
        color: white;
        font-size: 14px;
        z-index: 10000;
        animation: slideUp 0.3s ease-out;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Business Quick Prompts */
      .business-prompt-btn {
        padding: 8px 16px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 500;
        border: 1px solid;
        transition: all 0.3s ease;
        cursor: pointer;
        white-space: nowrap;
      }

      .business-prompt-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }

      /* Emotion Animation */
      .emoji-container {
        transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      }

      .emoji-pulse {
        animation: emojiPulse 2s infinite;
      }

      .emoji-bounce {
        animation: emojiBounce 1s infinite;
      }

      .emoji-spin {
        animation: emojiSpin 3s linear infinite;
      }

      .emoji-shake {
        animation: emojiShake 0.5s infinite;
      }

      .emoji-glow {
        animation: emojiGlow 2s infinite alternate;
      }

      @keyframes emojiPulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.2); }
        100% { transform: scale(1); }
      }

      @keyframes emojiBounce {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
      }

      @keyframes emojiSpin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }

      @keyframes emojiShake {
        0%, 100% { transform: translateX(0); }
        25% { transform: translateX(-5px); }
        75% { transform: translateX(5px); }
      }

      @keyframes emojiGlow {
        from { filter: drop-shadow(0 0 5px currentColor); }
        to { filter: drop-shadow(0 0 20px currentColor); }
      }

      /* Emotion Colors */
      .emotion-happy { color: #00ff00; }
      .emotion-processing { color: #00a8ff; }
      .emotion-busy { color: #ffaa00; }
      .emotion-completed { color: #00ff88; }
      .emotion-error { color: #ff5555; }
      .emotion-thinking { color: #aa00ff; }
      .emotion-creative { color: #ff00ff; }
      .emotion-analyzing { color: #00ffff; }

      /* SATISFACTION ORB STYLES */
      .satisfaction-orb-container {
        position: fixed;
        bottom: 30px;
        right: 30px;
        z-index: 999;
        cursor: pointer;
        transition: transform 0.3s ease;
      }

      .satisfaction-orb-container:hover {
        transform: scale(1.1);
      }

      .satisfaction-orb-wrapper {
        position: relative;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .satisfaction-orb-svg {
        filter: drop-shadow(0 5px 15px rgba(0, 240, 255, 0.3));
      }

      .satisfaction-orb-background {
        fill: none;
        stroke: rgba(255, 255, 255, 0.1);
        stroke-width: 10;
      }

      .satisfaction-orb-progress {
        fill: none;
        stroke-width: 10;
        stroke-linecap: round;
        transition: stroke-dashoffset 1s cubic-bezier(0.22, 1, 0.36, 1);
        transform-origin: center;
      }

      .satisfaction-orb-percentage {
        font-size: 14px;
        font-weight: 800;
        fill: white;
        font-family: 'Orbitron', sans-serif;
        text-shadow: 0 0 10px rgba(0, 240, 255, 0.8);
      }

      .satisfaction-orb-label {
        margin-top: 8px;
        font-size: 10px;
        font-family: 'Rajdhani', sans-serif;
        font-weight: 600;
        color: var(--neon-blue);
        text-align: center;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .satisfaction-orb-tooltip {
        position: absolute;
        bottom: 120%;
        right: 0;
        background: rgba(10, 10, 20, 0.95);
        backdrop-filter: blur(20px);
        border: 1px solid var(--neon-blue);
        border-radius: 12px;
        padding: 15px;
        width: 220px;
        color: white;
        font-size: 12px;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s, transform 0.3s;
        transform: translateY(10px);
        z-index: 1000;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      }

      .satisfaction-orb-tooltip::after {
        content: '';
        position: absolute;
        top: 100%;
        right: 20px;
        border: 8px solid transparent;
        border-top-color: var(--neon-blue);
      }

      .satisfaction-orb-container:hover .satisfaction-orb-tooltip {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
      }

      .satisfaction-orb-tooltip strong {
        color: var(--neon-blue);
        font-family: 'Orbitron', sans-serif;
        font-size: 13px;
        display: block;
        margin-bottom: 8px;
      }

      .satisfaction-orb-tooltip p {
        color: rgba(255, 255, 255, 0.8);
        line-height: 1.5;
        margin: 0;
      }

      .satisfaction-orb-metrics {
        display: flex;
        flex-direction: column;
        gap: 8px;
        margin-top: 10px;
      }

      .satisfaction-metric-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .satisfaction-metric-label {
        font-size: 11px;
        color: rgba(255, 255, 255, 0.7);
      }

      .satisfaction-metric-value {
        font-family: 'Orbitron', sans-serif;
        font-size: 12px;
        font-weight: bold;
      }

      .satisfaction-metric-bar {
        width: 100%;
        height: 4px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 2px;
        overflow: hidden;
        margin-top: 2px;
      }

      .satisfaction-metric-fill {
        height: 100%;
        border-radius: 2px;
        transition: width 0.5s ease;
      }

      /* Satisfaction Level Colors */
      .satisfaction-level-excellent { stroke: #00ff88; }
      .satisfaction-level-good { stroke: #00a8ff; }
      .satisfaction-level-average { stroke: #ffaa00; }
      .satisfaction-level-poor { stroke: #ff5555; }

      /* Chat History Styles */
      .chat-history-container {
        max-height: 300px; /* Reduced from 400px */
        overflow-y: auto;
        margin-bottom: 20px;
        border: 1px solid rgba(0, 240, 255, 0.2);
        border-radius: 12px;
        padding: 15px;
        background: rgba(0, 0, 0, 0.3);
      }

      .chat-history-item {
        padding: 12px 15px;
        margin-bottom: 10px;
        border-radius: 10px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        background: rgba(255, 255, 255, 0.05);
        transition: all 0.3s ease;
      }

      .chat-history-item:hover {
        background: rgba(255, 255, 255, 0.08);
        border-color: rgba(0, 240, 255, 0.3);
      }

      .chat-history-user {
        border-left: 4px solid var(--neon-blue);
      }

      .chat-history-bot {
        border-left: 4px solid var(--neon-magenta);
      }

      .chat-history-timestamp {
        font-size: 10px;
        color: rgba(255, 255, 255, 0.5);
        margin-bottom: 8px;
        font-family: 'Orbitron', sans-serif;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .chat-history-content {
        font-size: 12px; /* Reduced from 13px */
        line-height: 1.4;
      }

      .history-toggle-btn {
        padding: 8px 16px;
        background: rgba(0, 240, 255, 0.1);
        border: 1px solid rgba(0, 240, 255, 0.3);
        color: var(--neon-blue);
        border-radius: 20px;
        cursor: pointer;
        font-size: 12px;
        font-family: 'Orbitron', sans-serif;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .history-toggle-btn:hover {
        background: rgba(0, 240, 255, 0.2);
        transform: scale(1.05);
      }

      .clear-history-btn {
        padding: 6px 12px;
        background: rgba(255, 0, 255, 0.1);
        border: 1px solid rgba(255, 0, 255, 0.3);
        color: var(--neon-magenta);
        border-radius: 20px;
        cursor: pointer;
        font-size: 11px;
        font-family: 'Orbitron', sans-serif;
        transition: all 0.3s ease;
      }

      .clear-history-btn:hover {
        background: rgba(255, 0, 255, 0.2);
      }

      /* Modal Styles */
      .modal-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.8);
        backdrop-filter: blur(10px);
        z-index: 10000;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
      }

      .modal-container {
        background: rgba(20, 20, 30, 0.95);
        border: 1px solid var(--neon-blue);
        border-radius: 16px;
        max-width: 800px;
        width: 100%;
        max-height: 80vh;
        display: flex;
        flex-direction: column;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        border-bottom: 1px solid rgba(0, 240, 255, 0.3);
      }

      .modal-content {
        flex: 1;
        overflow-y: auto;
        padding: 20px;
        font-size: 14px;
        line-height: 1.6;
      }

      .modal-footer {
        padding: 15px 20px;
        border-top: 1px solid rgba(0, 240, 255, 0.3);
        display: flex;
        gap: 10px;
        justify-content: flex-end;
      }

      /* Team Stack Layout */
      .team-stack-container {
        display: flex;
        flex-direction: column;
        gap: 30px;
        max-width: 900px;
        margin: 0 auto;
      }

      .team-member-stack {
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(0, 240, 255, 0.2);
        border-radius: 20px;
        padding: 30px;
        transition: all 0.3s ease;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
      }

      .team-member-stack:hover {
        transform: translateY(-5px);
        border-color: var(--neon-blue);
        box-shadow: 0 10px 30px rgba(0, 240, 255, 0.2);
      }

      .team-member-avatar-stack {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        border: 3px solid var(--neon-blue);
        margin: 0 auto 25px;
        overflow: hidden;
        transition: all 0.3s ease;
      }

      .team-member-avatar-stack img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        filter: grayscale(100%);
        transition: all 0.3s ease;
      }

      .team-member-stack:hover .team-member-avatar-stack img {
        filter: grayscale(0%);
        transform: scale(1.05);
      }

      .team-member-name-stack {
        font-family: 'Orbitron', sans-serif;
        font-size: 28px;
        color: white;
        margin-bottom: 10px;
        text-align: center;
        width: 100%;
      }

      .team-member-role-stack {
        display: inline-block;
        padding: 8px 20px;
        background: linear-gradient(135deg, var(--neon-blue), var(--neon-magenta));
        color: black;
        border-radius: 25px;
        font-size: 14px;
        font-weight: bold;
        margin-bottom: 20px;
        font-family: 'Orbitron', sans-serif;
      }

      .team-member-bio-stack {
        font-size: 15px;
        line-height: 1.8;
        color: rgba(255, 255, 255, 0.85);
        margin-bottom: 25px;
        max-width: 700px;
        text-align: justify;
        hyphens: auto;
      }

      .team-member-bio-stack p {
        margin-bottom: 15px;
      }

      .team-member-bio-stack p:last-child {
        margin-bottom: 0;
      }

      .team-social-links-stack {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 20px;
      }

      .team-social-link-stack {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.05);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--neon-blue);
        transition: all 0.3s ease;
      }

      .team-social-link-stack:hover {
        background: var(--neon-blue);
        color: black;
        transform: scale(1.1);
      }

      /* Task Type Badges */
      .task-badge-cyan { background: rgba(0, 240, 255, 0.2); color: #00f0ff; }
      .task-badge-purple { background: rgba(255, 0, 255, 0.2); color: #ff00ff; }
      .task-badge-green { background: rgba(0, 255, 136, 0.2); color: #00ff88; }
      .task-badge-yellow { background: rgba(255, 170, 0, 0.2); color: #ffaa00; }
      .task-badge-pink { background: rgba(255, 105, 180, 0.2); color: #ff69b4; }
      .task-badge-orange { background: rgba(255, 140, 0, 0.2); color: #ff8c00; }
      .task-badge-blue { background: rgba(0, 123, 255, 0.2); color: #007bff; }

      /* History Action Buttons */
      .history-actions {
        display: flex;
        gap: 8px;
        margin-top: 8px;
      }

      .history-action-btn {
        padding: 4px 10px;
        border-radius: 15px;
        font-size: 11px;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 4px;
        border: none;
      }

      .history-view-btn {
        background: rgba(0, 240, 255, 0.1);
        color: var(--neon-blue);
        border: 1px solid rgba(0, 240, 255, 0.3);
      }

      .history-view-btn:hover {
        background: rgba(0, 240, 255, 0.2);
      }

      .history-copy-btn {
        background: rgba(255, 0, 255, 0.1);
        color: var(--neon-magenta);
        border: 1px solid rgba(255, 0, 255, 0.3);
      }

      .history-copy-btn:hover {
        background: rgba(255, 0, 255, 0.2);
      }

      /* Modal Action Buttons */
      .modal-action-btn {
        padding: 10px 20px;
        border-radius: 20px;
        font-family: 'Orbitron', sans-serif;
        font-size: 14px;
        cursor: pointer;
        transition: all 0.3s ease;
        border: none;
      }

      .modal-copy-btn {
        background: linear-gradient(135deg, var(--neon-blue), var(--neon-magenta));
        color: black;
        font-weight: bold;
      }

      .modal-copy-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 240, 255, 0.4);
      }

      .modal-close-btn {
        background: rgba(255, 255, 255, 0.1);
        color: white;
        border: 1px solid rgba(255, 255, 255, 0.3);
      }

      .modal-close-btn:hover {
        background: rgba(255, 255, 255, 0.2);
      }

      /* Login/Signup Modal Styles */
      .auth-modal-content {
        padding: 30px;
        max-width: 400px;
        margin: 0 auto;
      }

      .auth-form {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      .auth-input-group {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .auth-input-group label {
        font-size: 12px;
        color: var(--neon-blue);
        font-family: 'Orbitron', sans-serif;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .auth-input {
        padding: 12px 16px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(0, 240, 255, 0.2);
        border-radius: 10px;
        color: white;
        font-family: 'Rajdhani', sans-serif;
        font-size: 14px;
        transition: all 0.3s ease;
      }

      .auth-input:focus {
        outline: none;
        border-color: var(--neon-blue);
        box-shadow: 0 0 10px rgba(0, 240, 255, 0.3);
      }

      .auth-submit-btn {
        padding: 14px;
        background: linear-gradient(135deg, var(--neon-blue), var(--neon-magenta));
        border: none;
        border-radius: 10px;
        color: black;
        font-family: 'Orbitron', sans-serif;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-top: 10px;
      }

      .auth-submit-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 240, 255, 0.4);
      }

      .auth-switch-text {
        text-align: center;
        font-size: 12px;
        color: rgba(255, 255, 255, 0.6);
        margin-top: 15px;
      }

      .auth-switch-btn {
        background: none;
        border: none;
        color: var(--neon-blue);
        cursor: pointer;
        font-family: 'Orbitron', sans-serif;
        font-size: 12px;
        text-decoration: underline;
        transition: color 0.3s ease;
      }

      .auth-switch-btn:hover {
        color: var(--neon-magenta);
      }

      .auth-error {
        color: #ff5555;
        font-size: 12px;
        text-align: center;
        margin-top: 10px;
        display: none;
      }

      /* User Profile - FIXED POSITIONING - MOVED TO TOP-CENTER */
      .user-profile {
        display: flex;
        align-items: center;
        gap: 10px;
        position: absolute;
        top: 0;
        left: 50%;
        transform: translateX(-50%);
        z-index: 10;
        background: rgba(10, 10, 20, 0.7);
        backdrop-filter: blur(10px);
        border-radius: 0 0 20px 20px;
        padding: 8px 20px;
        border: 1px solid rgba(0, 240, 255, 0.2);
        border-top: none;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
      }

      .user-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--neon-blue), var(--neon-magenta));
        display: flex;
        align-items: center;
        justify-content: center;
        color: black;
        font-weight: bold;
        font-family: 'Orbitron', sans-serif;
        cursor: pointer;
      }

      .user-name {
        font-family: 'Rajdhani', sans-serif;
        font-size: 14px;
        color: white;
        cursor: pointer;
      }

      .logout-btn {
        padding: 8px 16px;
        background: rgba(255, 0, 255, 0.1);
        border: 1px solid rgba(255, 0, 255, 0.3);
        color: var(--neon-magenta);
        border-radius: 20px;
        font-family: 'Orbitron', sans-serif;
        font-size: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 5px;
      }

      .logout-btn:hover {
        background: rgba(255, 0, 255, 0.2);
        transform: scale(1.05);
      }

      /* =========================================== */
      /* MOBILE RESPONSIVE STYLES */
      /* =========================================== */

      /* Responsive Base Styles */
      @media (max-width: 768px) {
        body {
          cursor: default; /* Disable custom cursor on mobile */
        }
        
        #cursor {
          display: none; /* Hide custom cursor on mobile */
        }
        
        /* Adjust cube grid for mobile */
        .cube-grid {
          grid-template-columns: repeat(8, 1fr);
          gap: 10px;
          padding: 10px;
        }
        
        .cube {
          width: 30px;
          height: 30px;
        }
        
        /* Adjust orb sizes */
        .orb {
          width: 400px;
          height: 400px;
        }
        
        /* Tech card adjustments */
        .tech-card {
          padding: 1rem !important;
        }
        
        /* Landing section */
        #landing-section .tech-card {
          padding: 1.5rem !important;
        }
        
        #landing-section h1 {
          font-size: 2.5rem !important;
          line-height: 1.2;
        }
        
        #landing-section p.font-negan {
          font-size: 0.7rem !important;
          letter-spacing: 0.2em;
        }
        
        /* Grid adjustments */
        #landing-section .grid.lg\:grid-cols-2 {
          grid-template-columns: 1fr !important;
          gap: 1.5rem;
        }
        
        /* Button adjustments */
        .flex-wrap.gap-6 button {
          width: 100%;
          justify-content: center;
          padding: 0.75rem 1.5rem !important;
          margin-bottom: 0.5rem;
        }
        
        /* Agent section adjustments */
        #agent-section header {
          padding-top: 1rem;
          position: relative;
        }
        
        .chatbot-container {
          width: 120px !important;
          height: 120px !important;
          margin-top: 20px !important;
        }
        
        .chatbot-orb {
          inset: -8px !important;
        }
        
        #agent-section img.w-32 {
          width: 96px !important;
          height: 96px !important;
        }
        
        /* Business badges */
        .business-badges {
          flex-wrap: wrap;
          justify-content: center;
        }
        
        .business-badges span {
          font-size: 0.7rem !important;
          padding: 0.25rem 0.5rem !important;
        }
        
        /* Quick access toggle - Adjusted position for mobile */
        .quick-access-toggle {
          position: absolute !important;
          top: 10px !important;
          right: 10px !important;
          font-size: 0.7rem !important;
          padding: 6px 12px !important;
          z-index: 15;
        }
        
        /* Quick access toolbar */
        .quick-access-toolbar {
          position: fixed;
          top: 0;
          right: 0;
          left: 0;
          bottom: 0;
          width: 100%;
          height: 100vh;
          border-radius: 0;
          padding: 1rem;
          overflow-y: auto;
        }
        
        /* Business quick prompts */
        .business-quick-prompts .flex-wrap {
          justify-content: center;
        }
        
        .business-prompt-btn {
          font-size: 0.7rem !important;
          padding: 0.5rem 0.75rem !important;
          margin-bottom: 0.25rem;
        }
        
        /* Emotion and progress section */
        .flex.items-center.gap-8 {
          flex-direction: column;
          gap: 1rem !important;
        }
        
        .flex-1.space-y-3 {
          width: 100%;
        }
        
        /* Phase container */
        .phase-container {
          gap: 1rem;
        }
        
        .phase-section {
          padding: 1rem;
        }
        
        .phase-content {
          font-size: 0.875rem !important;
        }
        
        /* Action buttons */
        .mt-8.flex.gap-4 {
          flex-direction: column;
          gap: 0.75rem !important;
        }
        
        .mt-8.flex.gap-4 button {
          width: 100%;
          justify-content: center;
        }
        
        /* Footer input section */
        footer .tech-card {
          flex-direction: column;
          gap: 0.5rem !important;
          padding: 0.75rem !important;
        }
        
        footer .p-4 {
          padding: 0.5rem !important;
        }
        
        #user-input {
          font-size: 1rem !important;
        }
        
        /* Contact section adjustments */
        #contact-section .team-member-stack {
          padding: 1.5rem !important;
        }
        
        .team-member-avatar-stack {
          width: 120px !important;
          height: 120px !important;
        }
        
        .team-member-name-stack {
          font-size: 1.5rem !important;
        }
        
        .team-member-role-stack {
          font-size: 0.875rem !important;
          padding: 0.5rem 1rem !important;
        }
        
        .team-member-bio-stack {
          font-size: 0.875rem !important;
          line-height: 1.6;
        }
        
        .team-social-links-stack {
          gap: 1rem;
        }
        
        .team-social-link-stack {
          width: 36px;
          height: 36px;
        }
        
        /* Grid adjustments for team approach */
        .grid.md\:grid-cols-3 {
          grid-template-columns: 1fr !important;
          gap: 1.5rem;
        }
        
        /* Modal adjustments */
        .modal-container {
          margin: 1rem;
          max-height: 90vh;
        }
        
        .modal-content {
          padding: 1rem;
          font-size: 0.875rem;
        }
        
        .modal-footer {
          flex-direction: column;
          gap: 0.5rem;
        }
        
        .modal-footer button {
          width: 100%;
        }
        
        /* Chat history container */
        .chat-history-container {
          max-height: 250px;
        }
        
        .chat-history-item {
          padding: 0.75rem;
        }
        
        .history-actions {
          flex-direction: column;
          gap: 0.5rem;
        }
        
        .history-action-btn {
          width: 100%;
          justify-content: center;
        }
        
        /* Satisfaction orb */
        .satisfaction-orb-container {
          bottom: 20px;
          right: 20px;
        }
        
        .satisfaction-orb-svg {
          width: 60px;
          height: 60px;
        }
        
        .satisfaction-orb-tooltip {
          width: 280px;
          right: -50px;
        }
        
        .satisfaction-orb-tooltip::after {
          right: 50px;
        }
        
        /* Toast notification */
        .toast {
          left: 20px;
          right: 20px;
          bottom: 80px;
        }
        
        /* User profile adjustments for mobile - CENTERED AT TOP */
        .user-profile {
          position: absolute !important;
          top: 0 !important;
          left: 50% !important;
          right: auto !important;
          transform: translateX(-50%) !important;
          flex-direction: row;
          align-items: center;
          gap: 8px;
          padding: 6px 15px;
          border-radius: 0 0 15px 15px;
          width: auto;
          max-width: 90%;
          z-index: 15;
        }
        
        .user-avatar {
          width: 32px !important;
          height: 32px !important;
          font-size: 12px;
        }
        
        .user-name {
          font-size: 12px !important;
          display: block !important; /* Show name on mobile */
        }
        
        .logout-btn {
          padding: 4px 8px !important;
          font-size: 10px !important;
        }
        
        .logout-btn i {
          width: 12px !important;
          height: 12px !important;
        }
        
        /* Adjust top spacing for chatbot to avoid overlap */
        #agent-section header .chatbot-container {
          margin-top: 70px !important; /* Add space for user profile */
        }
        
        /* Back button positioning fix */
        header button.absolute.left-4 {
          top: 10px !important;
          left: 10px !important;
          z-index: 20;
        }
        
        /* Ensure no overlap with quick access toggle */
        .quick-access-toggle {
          top: 10px !important;
        }
      }

      /* Additional tablet adjustments */
      @media (min-width: 769px) and (max-width: 1024px) {
        .tech-card {
          padding: 1.5rem !important;
        }
        
        #landing-section h1 {
          font-size: 3rem !important;
        }
        
        .chatbot-container {
          width: 140px !important;
          height: 140px !important;
        }
        
        #agent-section img.w-32 {
          width: 112px !important;
          height: 112px !important;
        }
        
        .phase-container {
          gap: 1.5rem;
        }
        
        .team-member-stack {
          padding: 2rem !important;
        }
        
        .team-member-avatar-stack {
          width: 140px !important;
          height: 140px !important;
        }
        
        /* User profile adjustments for tablet */
        .user-profile {
          top: 0;
          left: 50%;
          transform: translateX(-50%);
          padding: 8px 20px;
        }
        
        .user-name {
          font-size: 13px;
        }
        
        .logout-btn {
          padding: 6px 12px;
          font-size: 11px;
        }
        
        /* Adjust chatbot margin to avoid overlap */
        #agent-section header .chatbot-container {
          margin-top: 70px !important;
        }
      }

      /* Very small mobile devices */
      @media (max-width: 375px) {
        #landing-section h1 {
          font-size: 2rem !important;
        }
        
        .tech-card {
          padding: 0.75rem !important;
        }
        
        .business-prompt-btn {
          font-size: 0.65rem !important;
          padding: 0.4rem 0.6rem !important;
        }
        
        .team-member-stack {
          padding: 1rem !important;
        }
        
        .team-member-avatar-stack {
          width: 100px !important;
          height: 100px !important;
        }
        
        .team-member-name-stack {
          font-size: 1.25rem !important;
        }
        
        /* Extra small screen user profile */
        .user-profile {
          gap: 4px;
          padding: 4px 12px;
          max-width: 95%;
        }
        
        .user-avatar {
          width: 28px !important;
          height: 28px !important;
          font-size: 10px;
        }
        
        .user-name {
          font-size: 11px !important;
        }
        
        .logout-btn {
          padding: 3px 6px !important;
          font-size: 9px !important;
        }
        
        /* Further adjust chatbot margin */
        #agent-section header .chatbot-container {
          margin-top: 65px !important;
        }
      }

      /* Prevent horizontal scrolling */
      html, body {
        max-width: 100%;
        overflow-x: hidden;
      }

      /* Touch-friendly buttons */
      button, .tool-icon, .history-action-btn, .modal-action-btn {
        min-height: 44px;
        min-width: 44px;
      }

      /* Better touch targets for small interactive elements */
      .p-4, .p-2, .p-3 {
        touch-action: manipulation;
      }

      /* Improve font readability on mobile */
      body {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
      }

      /* Adjust spacing for mobile */
      section {
        padding-left: 1rem;
        padding-right: 1rem;
      }

      /* Make sure images don't overflow */
      img {
        max-width: 100%;
        height: auto;
      }

      /* Better input fields on mobile */
      input, textarea, select {
        font-size: 16px !important; /* Prevents iOS zoom on focus */
      }
    </style>
  </head>
  <body>
    <div id="cursor"></div>
    <div class="cube-grid" id="cube-container"></div>
    <div class="orb-bg">
      <div class="orb bg-cyan-600 top-0 left-0"></div>
      <div class="orb bg-fuchsia-700 bottom-0 right-0" style="animation-delay: -7s"></div>
    </div>

    <!-- SATISFACTION ORB -->
    <div class="satisfaction-orb-container" id="satisfactionOrb">
      <div class="satisfaction-orb-wrapper">
        <svg class="satisfaction-orb-svg" width="80" height="80" viewBox="0 0 100 100">
          <circle cx="50" cy="50" r="40" class="satisfaction-orb-background"/>
          <circle cx="50" cy="50" r="40" class="satisfaction-orb-progress" 
                  stroke-dasharray="251.2" stroke-dashoffset="251.2"
                  transform="rotate(-90 50 50)" id="satisfaction-progress"/>
          <text x="50" y="50" text-anchor="middle" dy=".3em" 
                class="satisfaction-orb-percentage" id="satisfaction-percentage">0%</text>
        </svg>
        <div class="satisfaction-orb-label" id="satisfaction-label">SATISFACTION</div>
        
        <div class="satisfaction-orb-tooltip">
          <strong>Response Satisfaction</strong>
          <p>Indicates how well the AI response matches your business requirements and expectations.</p>
          
          <div class="satisfaction-orb-metrics">
            <div class="satisfaction-metric-item">
              <span class="satisfaction-metric-label">Relevance:</span>
              <span class="satisfaction-metric-value" id="metric-relevance">85%</span>
            </div>
            <div class="satisfaction-metric-bar">
              <div class="satisfaction-metric-fill" id="metric-relevance-bar" style="width: 85%; background: linear-gradient(90deg, #00ff88, #00a8ff);"></div>
            </div>
            
            <div class="satisfaction-metric-item">
              <span class="satisfaction-metric-label">Completeness:</span>
              <span class="satisfaction-metric-value" id="metric-completeness">78%</span>
            </div>
            <div class="satisfaction-metric-bar">
              <div class="satisfaction-metric-fill" id="metric-completeness-bar" style="width: 78%; background: linear-gradient(90deg, #00a8ff, #ffaa00);"></div>
            </div>
            
            <div class="satisfaction-metric-item">
              <span class="satisfaction-metric-label">Business Value:</span>
              <span class="satisfaction-metric-value" id="metric-business">92%</span>
            </div>
            <div class="satisfaction-metric-bar">
              <div class="satisfaction-metric-fill" id="metric-business-bar" style="width: 92%; background: linear-gradient(90deg, #ffaa00, #ff5555);"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Quick Access Toolbar -->
    <div id="quick-access-toolbar" class="quick-access-toolbar">
      <div class="quick-access-header">
        <div class="quick-access-title">Quick Access</div>
        <button class="close-toolbar" onclick="toggleToolbar()">
          <i data-lucide="x"></i>
        </button>
      </div>
      
      <a href="https://docs.google.com/document" target="_blank" class="tool-icon">
        <i data-lucide="file-text"></i>
        <div>
          <div class="tool-name">Google Docs</div>
          <div class="tool-subtext">Create & edit documents</div>
        </div>
      </a>
      
      <a href="https://docs.google.com/presentation" target="_blank" class="tool-icon">
        <i data-lucide="presentation"></i>
        <div>
          <div class="tool-name">Google Slides</div>
          <div class="tool-subtext">Create presentations</div>
        </div>
      </a>
      
      <a href="https://www.canva.com" target="_blank" class="tool-icon">
        <i data-lucide="palette"></i>
        <div>
          <div class="tool-name">Canva</div>
          <div class="tool-subtext">Design & graphics</div>
        </div>
      </a>
      
      <a href="https://keep.google.com" target="_blank" class="tool-icon">
        <i data-lucide="sticky-note"></i>
        <div>
          <div class="tool-name">Sticky Notes</div>
          <div class="tool-subtext">Quick notes & reminders</div>
        </div>
      </a>
      
      <a href="https://meet.google.com" target="_blank" class="tool-icon">
        <i data-lucide="video"></i>
        <div>
          <div class="tool-name">Google Meet</div>
          <div class="tool-subtext">Video meetings</div>
        </div>
      </a>
    </div>

    <div id="main-content" class="min-h-screen flex flex-col items-center">
      <section id="landing-section" class="min-h-screen w-full flex flex-col items-center justify-center p-6 sm:p-10">
        <div class="tech-card p-8 sm:p-12 rounded-3xl text-center max-w-6xl w-full">
          <img src="/static/i2p logo.png" class="w-48 mx-auto mb-8 opacity-90" alt="I2P Logo" />
          <h1 class="font-senorita text-4xl sm:text-6xl text-[#00f0ff] mb-2">Ideas-2-Project</h1>
          <p class="font-negan tracking-[0.4em] uppercase text-gray-400 text-xs sm:text-sm mb-12">Business Intelligence & Technical Development</p>

          <div class="grid lg:grid-cols-2 gap-8 text-left border-t border-white/10 pt-10">
            <div class="space-y-6">
              <h3 class="text-[#ff00ff] font-senorita text-xl border-l-4 border-[#ff00ff] pl-4">Solving Core Challenges</h3>
              <div class="grid gap-4">
                <div class="tech-card p-4 rounded-xl">
                  <b class="text-white block mb-1">Precision Ideation</b>
                  <p class="text-gray-400 text-sm">Eliminating the struggle to identify high-impact concepts by aligning skill sets with trends.</p>
                </div>
                <div class="tech-card p-4 rounded-xl">
                  <b class="text-white block mb-1">Unified Ecosystem</b>
                  <p class="text-gray-400 text-sm">Consolidating fragmented tools into a single environment for mentoring and pitching.</p>
                </div>
              </div>
            </div>
            <div class="space-y-6">
              <h3 class="text-[#00f0ff] font-senorita text-xl border-l-4 border-[#00f0ff] pl-4">Empowering Innovators</h3>
              <div class="grid gap-4">
                <div class="tech-card p-4 rounded-xl">
                  <b class="text-white block mb-1">Academic Innovators</b>
                  <p class="text-gray-400 text-sm">Students gaining industry relevance and domain clarity for impactful careers.</p>
                </div>
                <div class="tech-card p-4 rounded-xl">
                  <b class="text-white block mb-1">Visionary Founders</b>
                  <p class="text-gray-400 text-sm">Entrepreneurs validating concepts and securing stakeholder investment.</p>
                </div>
              </div>
            </div>
          </div>

          <div class="flex flex-wrap gap-6 justify-center mt-12">
            <button onclick="showSection('agent-section')" class="flex items-center gap-3 bg-[#00f0ff] text-black px-10 py-4 rounded-full font-bold hover:scale-105 transition-all shadow-[0_0_20px_rgba(0,240,255,0.4)]">
              <i data-lucide="bot"></i> Launch Business AI
            </button>
            <button onclick="showSection('contact-section')" class="flex items-center gap-3 border border-white/20 text-white px-10 py-4 rounded-full font-bold hover:bg-white/5 transition-all">
              <i data-lucide="users"></i> View Team
            </button>
          </div>

          <!-- Login/Signup buttons (only show when not logged in) -->
          <div id="auth-buttons" class="flex flex-wrap gap-4 justify-center mt-8" style="display: none;">
            <button onclick="showLoginModal()" class="flex items-center gap-3 border border-green-500 text-green-400 px-8 py-3 rounded-full font-bold hover:bg-green-500/10 transition-all">
              <i data-lucide="log-in"></i> Login
            </button>
            <button onclick="showSignupModal()" class="flex items-center gap-3 border border-purple-500 text-purple-400 px-8 py-3 rounded-full font-bold hover:bg-purple-500/10 transition-all">
              <i data-lucide="user-plus"></i> Sign Up
            </button>
          </div>
        </div>
      </section>

      <section id="agent-section" class="min-h-screen w-full hidden flex flex-col items-center justify-between p-8">
        <header class="flex flex-col items-center relative w-full max-w-4xl mx-auto">
          <!-- Fixed back button position - TOP LEFT -->
          <button onclick="showSection('landing-section')" class="absolute left-4 top-4 text-gray-500 hover:text-white flex items-center gap-2 z-20">
            <i data-lucide="chevron-left"></i> Home
          </button>
          
          <!-- User Profile (only show when logged in) - TOP CENTER -->
          <div id="user-profile" class="user-profile" style="display: none;">
            <div class="user-avatar" id="user-avatar" onclick="toggleUserMenu()"></div>
            <span class="user-name" id="user-name" onclick="toggleUserMenu()"></span>
            <button onclick="logout()" class="logout-btn">
              <i data-lucide="log-out"></i> Logout
            </button>
          </div>
          
          <!-- Quick Access Toggle Button - TOP RIGHT -->
          <button class="quick-access-toggle" onclick="toggleToolbar()">
            <i data-lucide="zap"></i>
            Quick Access
          </button>
          
          <!-- Main content centered -->
          <div class="chatbot-container mb-4 mt-12">
            <div class="chatbot-orb"></div>
            <img src="/static/chatbot.png" class="w-32 h-32 object-contain relative z-10" alt="Agent" />
          </div>
          
          <!-- Business Badges -->
          <div class="business-badges flex gap-2 mt-2">
            <span class="px-3 py-1 bg-blue-900/30 text-blue-400 text-xs rounded-full border border-blue-700">
               Business AI
            </span>
            <span class="px-3 py-1 bg-purple-900/30 text-purple-400 text-xs rounded-full border border-purple-700">
               Investor Ready
            </span>
            <span class="px-3 py-1 bg-green-900/30 text-green-400 text-xs rounded-full border border-green-700">
               Startup Focus
            </span>
          </div>
          
          <h2 class="font-senorita text-2xl text-[#00f0ff] mt-3">Hi, this is I2P Business AI</h2>
          <p class="text-gray-400 text-sm mt-1">Your AI Co-founder for Business & Technology</p>
        </header>

        <main id="dynamic-workspace" class="w-full max-w-4xl space-y-10 hidden-state flex-col mt-8">
          <!-- Login prompt for chat history -->
          <div id="login-prompt" class="tech-card p-6 rounded-2xl border-cyan-500/20 text-center">
            <i data-lucide="lock" class="w-12 h-12 text-cyan-400 mx-auto mb-4"></i>
            <h3 class="font-senorita text-lg text-cyan-400 mb-2">Chat History Protected</h3>
            <p class="text-gray-400 mb-4">Login or sign up to save and access your chat history across devices.</p>
            <div class="flex gap-4 justify-center">
              <button onclick="showLoginModal()" class="px-6 py-2 rounded-full border border-green-500 text-green-400 hover:bg-green-500/10 transition">
                <i data-lucide="log-in" class="w-4 h-4 inline mr-2"></i> Login
              </button>
              <button onclick="showSignupModal()" class="px-6 py-2 rounded-full border border-purple-500 text-purple-400 hover:bg-purple-500/10 transition">
                <i data-lucide="user-plus" class="w-4 h-4 inline mr-2"></i> Sign Up
              </button>
            </div>
          </div>

          <!-- Chat History Toggle (only show when logged in) -->
          <div id="chat-history-section" class="hidden">
            <div class="flex justify-between items-center">
              <h4 class="font-senorita text-sm text-cyan-400"> CHAT HISTORY</h4>
              <div class="flex gap-2">
                <button onclick="toggleChatHistory()" class="history-toggle-btn">
                  <i data-lucide="history"></i>
                  <span id="history-toggle-text">Show History</span>
                </button>
                <button onclick="clearChatHistory()" class="clear-history-btn">
                  <i data-lucide="trash-2"></i>
                  Clear
                </button>
              </div>
            </div>

            <!-- Chat History Container -->
            <div id="chat-history-container" class="chat-history-container hidden">
              <!-- Chat history items will be dynamically inserted here -->
            </div>
          </div>

          <!-- Business Quick Prompts -->
          <div class="business-quick-prompts tech-card p-4 rounded-2xl">
            <h4 class="font-senorita text-sm text-cyan-400 mb-3"> BUSINESS QUICK STARTERS</h4>
            <div class="flex flex-wrap gap-2">
              <button onclick="setBusinessPrompt('pitch')" class="business-prompt-btn border-cyan-700 text-cyan-400 hover:bg-cyan-900/20">
                 Pitch Deck
              </button>
              <button onclick="setBusinessPrompt('financial')" class="business-prompt-btn border-purple-700 text-purple-400 hover:bg-purple-900/20">
                 Financial Model
              </button>
              <button onclick="setBusinessPrompt('market')" class="business-prompt-btn border-green-700 text-green-400 hover:bg-green-900/20">
                 Market Analysis
              </button>
              <button onclick="setBusinessPrompt('strategy')" class="business-prompt-btn border-yellow-700 text-yellow-400 hover:bg-yellow-900/20">
                 Business Strategy
              </button>
              <button onclick="setBusinessPrompt('plan')" class="business-prompt-btn border-pink-700 text-pink-400 hover:bg-pink-900/20">
                 Business Plan
              </button>
              <button onclick="setBusinessPrompt('code')" class="business-prompt-btn border-orange-700 text-orange-400 hover:bg-orange-900/20">
                 Technical Code
              </button>
            </div>
          </div>

          <div class="flex items-center gap-8">
            <div class="flex flex-col items-center">
              <!-- Dynamic Emoji Container -->
              <div id="emoji-container" class="emoji-container p-3 tech-card rounded-xl border-[#00ff00]/30 shadow-[0_0_10px_rgba(0,255,0,0.2)] emotion-happy">
                <span id="emoji-icon" class="text-2xl"></span>
              </div>
              <span id="emotion-text" class="text-[9px] mt-2 text-[#00ff00] font-mono tracking-tighter uppercase">EMOTION: READY</span>
            </div>

            <div class="flex-1 space-y-3">
              <div class="flex justify-between text-[10px] font-mono text-cyan-400">
                <span id="status-text">_SYSTEM_IDLE...</span>
                <span id="percent">0%</span>
              </div>
              <div class="h-1 w-full bg-white/5 rounded-full overflow-hidden">
                <div id="progress-bar" class="progress-inner"></div>
              </div>
            </div>
          </div>

          <div class="w-full">
            <div class="tech-card p-6 rounded-2xl border-cyan-500/20 w-full min-h-[300px]">
              <h3 id="dynamic-phase-title" class="font-senorita text-cyan-500 text-sm mb-4 tracking-widest uppercase">
                AWAITING BUSINESS INPUT...
              </h3>
              
              <!-- Phase Sections Container -->
              <div id="phase-container" class="phase-container">
                <!-- Phase sections will be dynamically inserted here -->
              </div>
              
              <div class="mt-8 flex gap-4 justify-center">
                <button onclick="copyFullOutput()" type="button" class="px-6 py-2 rounded-full border border-fuchsia-400 text-fuchsia-400 hover:bg-fuchsia-400 hover:text-black transition flex items-center gap-2">
                  <i data-lucide="copy" class="w-4 h-4"></i> Copy Content
                </button>
                <button id="continue-btn" onclick="generateResponse(true)" type="button" class="hidden px-6 py-2 rounded-full border border-cyan-400 text-cyan-400 hover:bg-cyan-400 hover:text-black transition flex items-center gap-2">
                  <i data-lucide="play" class="w-4 h-4"></i> Continue
                </button>
                <button onclick="exportToDoc()" type="button" class="px-6 py-2 rounded-full border border-green-400 text-green-400 hover:bg-green-400 hover:text-black transition flex items-center gap-2">
                  <i data-lucide="download" class="w-4 h-4"></i> Export
                </button>
              </div>
            </div>
          </div>
        </main>

        <footer class="w-full max-w-2xl mb-10">
          <div class="tech-card p-2 rounded-2xl flex items-center gap-4 border-white/10 bg-black/40 shadow-2xl">
            
            <input type="file" id="file-upload" class="hidden" />
            <button onclick="document.getElementById('file-upload').click()" type="button" class="p-4 text-gray-500 hover:text-[#00f0ff] transition-all">
              <i data-lucide="paperclip"></i>
            </button>
        
            <div class="flex-1 flex flex-col px-4">
              <input id="user-input" type="text" placeholder="Describe your business idea, request pitch deck, financial model, or code..." class="bg-transparent border-none outline-none font-negan text-lg text-white w-full py-2" />
              
              <span id="file-indicator" class="text-[10px] text-cyan-400 hidden italic">
                File attached: <span id="file-name"></span>
              </span>
            </div>
        
            <button type="button" onclick="generateResponse(false)" class="bg-[#00f0ff] text-black p-4 rounded-xl hover:scale-105 transition-all">
              <i data-lucide="send"></i>
            </button>
          </div>
          
          <div class="text-center mt-4">
            <p class="text-xs text-gray-500">
               <span class="text-cyan-400">Pro Tip:</span> Be specific! Example: "Create a pitch deck for my SaaS startup" or "Write Python code for a customer dashboard"
            </p>
          </div>
        </footer>
      </section>

      <section id="contact-section" class="min-h-screen w-full hidden flex flex-col items-center justify-start p-6 sm:p-10 overflow-y-auto pb-20">
        <div class="w-full max-w-6xl">
          <button onclick="showSection('landing-section')" class="mb-10 text-gray-500 hover:text-white flex items-center gap-2">
            <i data-lucide="chevron-left"></i> Home
          </button>
          <h2 class="font-senorita text-4xl text-[#00f0ff] mb-12 text-center drop-shadow-[0_0_10px_#00f0ff]">I2P TECHNICAL TEAM</h2>
          
          <!-- Stack Team Layout -->
          <div class="team-stack-container">
            <!-- Varsha SK -->
            <div class="team-member-stack">
              <div class="team-member-avatar-stack">
                <img src="/static/varsha.png" alt="Varsha SK">
              </div>
              <h3 class="team-member-name-stack">Varsha SK</h3>
              <div class="team-member-role-stack">Web Developer</div>
              <div class="team-member-bio-stack">
                <p>Computer Science student with a strong foundation in Java and HTML, currently exploring front-end design and UI/UX tools. Passionate about building user-friendly interfaces and always eager to learn, collaborate, and grow.</p>
                <p>Open to opportunities that enhance my technical skills and industry experience, with a focus on creating intuitive and accessible digital solutions that make a meaningful impact.</p>
              </div>
              <div class="team-social-links-stack">
                <a href="https://linkedin.com/in/varsha-sk-387a702a3" target="_blank" class="team-social-link-stack">
                  <i data-lucide="linkedin"></i>
                </a>
                <a href="https://github.com/varshh06" target="_blank" class="team-social-link-stack">
                  <i data-lucide="github"></i>
                </a>
                <a href="https://mail.google.com/mail/?view=cm&to=varshakarthik06@gmail.com" target="_blank" class="team-social-link-stack">
                  <i data-lucide="mail"></i>
                </a>
              </div>
            </div>

            <!-- Rutheeshwaran P -->
            <div class="team-member-stack">
              <div class="team-member-avatar-stack">
                <img src="/static/rutheesh.jpg" alt="Rutheeshwaran P">
              </div>
              <h3 class="team-member-name-stack">Rutheeshwaran P</h3>
              <div class="team-member-role-stack">ML Engineer</div>
              <div class="team-member-bio-stack">
                <p>Being an Artificial Intelligence & Data Science student, I'm ready to learn any fields and excited to implement my learnings in actual projects. Passionate about machine learning, data analysis, and building intelligent systems that solve real-world problems.</p>
                <p>Constantly exploring new technologies and methodologies to create data-driven solutions, with a focus on practical applications and continuous improvement in the field of artificial intelligence.</p>
              </div>
              <div class="team-social-links-stack">
                <a href="https://linkedin.com/in/rutheeshwaran-prabakaran-5ru" target="_blank" class="team-social-link-stack">
                  <i data-lucide="linkedin"></i>
                </a>
                <a href="https://github.com/rutheeshwaran" target="_blank" class="team-social-link-stack">
                  <i data-lucide="github"></i>
                </a>
                <a href="https://mail.google.com/mail/?view=cm&to=rutheesh56@gmail.com" target="_blank" class="team-social-link-stack">
                  <i data-lucide="mail"></i>
                </a>
              </div>
            </div>

            <!-- Kavin C -->
            <div class="team-member-stack">
              <div class="team-member-avatar-stack">
                <img src="/static/kavin.jpg" alt="Kavin C">
              </div>
              <h3 class="team-member-name-stack">Kavin C</h3>
              <div class="team-member-role-stack">UI/UX Designer & Developer</div>
              <div class="team-member-bio-stack">
                <p>Information Technology student interested in UI/UX design, web development, and robotics/UAV technologies. Specializing in transforming design ideas into real-world solutions that balance creativity with usability.</p>
                <p>As a Designer, Developer, and ongoing Learner, I excel where aesthetics meet technical execution. My process blends human-centered design values with effective development methodologies to craft intuitive digital solutions that address actual issues, ensuring both visual appeal and functional excellence.</p>
                <p>Focusing on creating experiences that are not only beautiful but also highly usable and accessible, with a commitment to continuous learning and staying at the forefront of design and technology trends.</p>
              </div>
              <div class="team-social-links-stack">
                <a href="https://linkedin.com/in/kavin040405" target="_blank" class="team-social-link-stack">
                  <i data-lucide="linkedin"></i>
                </a>
                <a href="https://github.com/kavin-04" class="team-social-link-stack">
                  <i data-lucide="github"></i>
                </a>
                <a href="https://mail.google.com/mail/?view=cm&to=kavinanimation0405@gmail.com" class="team-social-link-stack">
                  <i data-lucide="mail"></i>
                </a>
              </div>
            </div>
          </div>

          <div class="mt-12 tech-card p-8 rounded-3xl">
            <h3 class="font-senorita text-2xl text-[#00f0ff] mb-6 text-center">OUR COLLABORATIVE APPROACH</h3>
            <div class="grid md:grid-cols-3 gap-6">
              <div class="text-center">
                <div class="text-3xl mb-2"></div>
                <h4 class="font-senorita text-lg text-white mb-2">Design-First Philosophy</h4>
                <p class="text-gray-400 text-sm">We believe great products start with exceptional user experiences and intuitive interfaces.</p>
              </div>
              <div class="text-center">
                <div class="text-3xl mb-2"></div>
                <h4 class="font-senorita text-lg text-white mb-2">Technical Excellence</h4>
                <p class="text-gray-400 text-sm">Combining robust backend systems with elegant frontend implementations for scalable solutions.</p>
              </div>
              <div class="text-center">
                <div class="text-3xl mb-2"></div>
                <h4 class="font-senorita text-lg text-white mb-2">Continuous Learning</h4>
                <p class="text-gray-400 text-sm">Embracing new technologies and methodologies to stay at the forefront of innovation.</p>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <script>
      lucide.createIcons();

      const cursor = document.getElementById("cursor");
      const cubeContainer = document.getElementById("cube-container");

      // Background Effect
      if (cubeContainer) {
        for (let i = 0; i < 60; i++) {
          const cube = document.createElement("div");
          cube.className = "cube";
          cube.style.animationDelay = `${Math.random() * 5}s`;
          cubeContainer.appendChild(cube);
        }
      }

      // Mouse Tracker
      document.addEventListener("mousemove", (e) => {
        if (cursor) {
          cursor.style.left = `${e.clientX}px`;
          cursor.style.top = `${e.clientY}px`;
        }
        document.querySelectorAll(".tech-card").forEach((card) => {
          const rect = card.getBoundingClientRect();
          card.style.setProperty("--x", `${e.clientX - rect.left}px`);
          card.style.setProperty("--y", `${e.clientY - rect.top}px`);
        });
      });

      /* AUTHENTICATION SYSTEM */
      let CURRENT_USER = JSON.parse(localStorage.getItem('i2p_current_user')) || null;
      let USERS_DB = JSON.parse(localStorage.getItem('i2p_users_db')) || {};
      let CHAT_HISTORY = {};
      let HISTORY_VISIBLE = false;
      let ACTIVE_MODAL = null;

      // Initialize authentication
      function initAuth() {
        // Load users database
        if (!localStorage.getItem('i2p_users_db')) {
          USERS_DB = {};
          saveUsersDB();
        }

        // Load current user
        const savedUser = localStorage.getItem('i2p_current_user');
        if (savedUser) {
          CURRENT_USER = JSON.parse(savedUser);
          loadUserChatHistory();
        }

        // Update UI based on auth state
        updateAuthUI();
      }

      function saveUsersDB() {
        localStorage.setItem('i2p_users_db', JSON.stringify(USERS_DB));
      }

      function saveCurrentUser() {
        if (CURRENT_USER) {
          localStorage.setItem('i2p_current_user', JSON.stringify(CURRENT_USER));
        } else {
          localStorage.removeItem('i2p_current_user');
        }
      }

      function saveUserChatHistory() {
        if (CURRENT_USER) {
          const userKey = `i2p_chat_history_${CURRENT_USER.email}`;
          localStorage.setItem(userKey, JSON.stringify(CHAT_HISTORY));
        }
      }

      function loadUserChatHistory() {
        if (CURRENT_USER) {
          const userKey = `i2p_chat_history_${CURRENT_USER.email}`;
          CHAT_HISTORY = JSON.parse(localStorage.getItem(userKey)) || [];
          updateChatHistoryDisplay();
        }
      }

      function updateAuthUI() {
        const authButtons = document.getElementById('auth-buttons');
        const userProfile = document.getElementById('user-profile');
        const loginPrompt = document.getElementById('login-prompt');
        const chatHistorySection = document.getElementById('chat-history-section');
        
        if (CURRENT_USER) {
          // User is logged in
          if (authButtons) authButtons.style.display = 'none';
          if (userProfile) {
            userProfile.style.display = 'flex';
            document.getElementById('user-avatar').textContent = 
              CURRENT_USER.name.charAt(0).toUpperCase();
            document.getElementById('user-name').textContent = CURRENT_USER.name;
          }
          if (loginPrompt) loginPrompt.style.display = 'none';
          if (chatHistorySection) chatHistorySection.classList.remove('hidden');
        } else {
          // User is not logged in
          if (authButtons) authButtons.style.display = 'flex';
          if (userProfile) userProfile.style.display = 'none';
          if (loginPrompt) loginPrompt.style.display = 'block';
          if (chatHistorySection) chatHistorySection.classList.add('hidden');
        }
        
        // Load chat history if user is logged in
        if (CURRENT_USER) {
          loadChatHistory();
        }
      }

      function showLoginModal() {
        const modalContent = `
          <div class="modal-header">
            <h3 class="font-senorita text-lg text-cyan-400">Login to I2P</h3>
            <button onclick="closeModal()" class="text-gray-500 hover:text-white">
              <i data-lucide="x" class="w-5 h-5"></i>
            </button>
          </div>
          <div class="modal-content auth-modal-content">
            <form id="login-form" class="auth-form">
              <div class="auth-input-group">
                <label for="login-email">Email</label>
                <input type="email" id="login-email" class="auth-input" placeholder="Enter your email" required>
              </div>
              <div class="auth-input-group">
                <label for="login-password">Password</label>
                <input type="password" id="login-password" class="auth-input" placeholder="Enter your password" required>
              </div>
              <div id="login-error" class="auth-error">Invalid email or password</div>
              <button type="submit" class="auth-submit-btn">Login</button>
            </form>
            <div class="auth-switch-text">
              Don't have an account? <button onclick="showSignupModal()" class="auth-switch-btn">Sign up</button>
            </div>
          </div>
        `;
        
        showModal(modalContent);
        
        // Add form submission handler
        setTimeout(() => {
          document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            loginUser(email, password);
          });
        }, 100);
      }

      function showSignupModal() {
        const modalContent = `
          <div class="modal-header">
            <h3 class="font-senorita text-lg text-cyan-400">Create Account</h3>
            <button onclick="closeModal()" class="text-gray-500 hover:text-white">
              <i data-lucide="x" class="w-5 h-5"></i>
            </button>
          </div>
          <div class="modal-content auth-modal-content">
            <form id="signup-form" class="auth-form">
              <div class="auth-input-group">
                <label for="signup-name">Full Name</label>
                <input type="text" id="signup-name" class="auth-input" placeholder="Enter your full name" required>
              </div>
              <div class="auth-input-group">
                <label for="signup-email">Email</label>
                <input type="email" id="signup-email" class="auth-input" placeholder="Enter your email" required>
              </div>
              <div class="auth-input-group">
                <label for="signup-password">Password</label>
                <input type="password" id="signup-password" class="auth-input" placeholder="Create a password (min. 6 characters)" required minlength="6">
              </div>
              <div id="signup-error" class="auth-error">Email already registered</div>
              <button type="submit" class="auth-submit-btn">Create Account</button>
            </form>
            <div class="auth-switch-text">
              Already have an account? <button onclick="showLoginModal()" class="auth-switch-btn">Login</button>
            </div>
          </div>
        `;
        
        showModal(modalContent);
        
        // Add form submission handler
        setTimeout(() => {
          document.getElementById('signup-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('signup-name').value;
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            signupUser(name, email, password);
          });
        }, 100);
      }

      function loginUser(email, password) {
        const user = USERS_DB[email];
        const errorElement = document.getElementById('login-error');
        
        if (user && user.password === password) {
          // Login successful
          CURRENT_USER = {
            email: email,
            name: user.name,
            joined: user.joined
          };
          
          saveCurrentUser();
          loadUserChatHistory();
          updateAuthUI();
          closeModal();
          showToast(`Welcome back, ${user.name}!`);
          updateEmotion('happy', '', `WELCOME ${user.name.toUpperCase()}`);
        } else {
          // Login failed
          errorElement.style.display = 'block';
          errorElement.textContent = 'Invalid email or password';
          updateEmotion('error', '', 'LOGIN_FAILED');
        }
      }

      function signupUser(name, email, password) {
        const errorElement = document.getElementById('signup-error');
        
        if (USERS_DB[email]) {
          // Email already exists
          errorElement.style.display = 'block';
          errorElement.textContent = 'Email already registered';
          updateEmotion('error', '', 'EMAIL_EXISTS');
          return;
        }
        
        // Create new user
        USERS_DB[email] = {
          name: name,
          email: email,
          password: password,
          joined: new Date().toISOString()
        };
        
        CURRENT_USER = {
          email: email,
          name: name,
          joined: USERS_DB[email].joined
        };
        
        saveUsersDB();
        saveCurrentUser();
        CHAT_HISTORY = []; // Initialize empty chat history for new user
        saveUserChatHistory();
        
        updateAuthUI();
        closeModal();
        showToast(`Account created successfully, ${name}!`);
        updateEmotion('happy', '', 'ACCOUNT_CREATED');
      }

      function logout() {
        if (confirm("Are you sure you want to logout?")) {
          CURRENT_USER = null;
          CHAT_HISTORY = [];
          saveCurrentUser();
          updateAuthUI();
          showToast("Logged out successfully");
          updateEmotion('ready', '', 'LOGGED_OUT');
        }
      }

      function toggleUserMenu() {
        // You can add a dropdown menu here if needed
        // For now, just show logout option
      }

      function showSection(id) {
        document.querySelectorAll("section").forEach((s) => s.classList.add("hidden"));
        document.getElementById(id)?.classList.remove("hidden");
        window.scrollTo(0, 0);
        
        // Reset emotion when switching sections
        if (id === 'agent-section') {
          updateEmotion('ready', '', '_SYSTEM_IDLE...');
          if (CURRENT_USER) {
            loadChatHistory(); // Load chat history when switching to agent section
          }
        }
        
        // Close quick access toolbar on mobile when switching sections
        if (window.innerWidth <= 768) {
          const toolbar = document.getElementById('quick-access-toolbar');
          if (toolbar) toolbar.style.display = 'none';
        }
      }

      /* CHAT HISTORY SYSTEM (Updated for user-specific storage) */
      function saveChatHistory() {
        saveUserChatHistory();
      }

      function addToChatHistory(userMessage, botResponse, taskType = 'general') {
        if (!CURRENT_USER) {
          showToast("Please login to save chat history");
          return;
        }
        
        const timestamp = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        
        CHAT_HISTORY.push({
          id: Date.now(),
          user: userMessage,
          bot: botResponse,
          taskType: taskType,
          timestamp: timestamp,
          date: new Date().toLocaleDateString()
        });
        
        // Keep only last 20 conversations
        if (CHAT_HISTORY.length > 20) {
          CHAT_HISTORY = CHAT_HISTORY.slice(-20);
        }
        
        saveChatHistory();
        updateChatHistoryDisplay();
      }

      function updateChatHistoryDisplay() {
        if (!CURRENT_USER) return;
        
        const historyContainer = document.getElementById('chat-history-container');
        if (!historyContainer) return;
        
        historyContainer.innerHTML = '';
        
        if (CHAT_HISTORY.length === 0) {
          historyContainer.innerHTML = `
            <div class="text-center py-10 text-gray-500">
              <i data-lucide="message-square" class="w-12 h-12 mx-auto mb-4"></i>
              <p>No chat history yet.</p>
              <p class="text-xs mt-2">Start a conversation to see your history here.</p>
            </div>
          `;
          lucide.createIcons();
          return;
        }
        
        // Display in reverse chronological order (newest first)
        [...CHAT_HISTORY].reverse().forEach((item, index) => {
          const historyItem = document.createElement('div');
          historyItem.className = `chat-history-item chat-history-${index % 2 === 0 ? 'user' : 'bot'}`;
          
          const taskBadgeClass = getTaskBadgeClass(item.taskType);
          const taskDisplayName = getTaskDisplayName(item.taskType);
          
          historyItem.innerHTML = `
            <div class="chat-history-timestamp">
              <div class="flex items-center gap-2">
                <i data-lucide="clock" class="w-3 h-3"></i>
                ${item.date}  ${item.timestamp}
              </div>
              <span class="px-2 py-1 text-xs rounded-full ${taskBadgeClass}">
                ${taskDisplayName}
              </span>
            </div>
            <div class="chat-history-content">
              <strong class="text-cyan-400">You:</strong> ${item.user.substring(0, 80)}${item.user.length > 80 ? '...' : ''}
              <br>
              <strong class="text-purple-400">AI:</strong> ${item.bot.substring(0, 100)}${item.bot.length > 100 ? '...' : ''}
            </div>
            <div class="history-actions">
              <button onclick="viewFullConversation(${item.id})" class="history-action-btn history-view-btn">
                <i data-lucide="eye" class="w-3 h-3"></i> View
              </button>
              <button onclick="copyConversation(${item.id})" class="history-action-btn history-copy-btn">
                <i data-lucide="copy" class="w-3 h-3"></i> Copy
              </button>
            </div>
          `;
          historyContainer.appendChild(historyItem);
        });
        
        lucide.createIcons();
      }

      function loadChatHistory() {
        if (CURRENT_USER) {
          updateChatHistoryDisplay();
        }
      }

      function toggleChatHistory() {
        if (!CURRENT_USER) {
          showToast("Please login to view chat history");
          return;
        }
        
        const historyContainer = document.getElementById('chat-history-container');
        const toggleText = document.getElementById('history-toggle-text');
        
        HISTORY_VISIBLE = !HISTORY_VISIBLE;
        
        if (HISTORY_VISIBLE) {
          historyContainer.classList.remove('hidden');
          toggleText.textContent = 'Hide History';
          // Scroll to top of history
          historyContainer.scrollTop = 0;
        } else {
          historyContainer.classList.add('hidden');
          toggleText.textContent = 'Show History';
        }
      }

      function clearChatHistory() {
        if (!CURRENT_USER) {
          showToast("Please login to clear chat history");
          return;
        }
        
        if (confirm("Are you sure you want to clear all chat history? This action cannot be undone.")) {
          CHAT_HISTORY = [];
          saveChatHistory();
          updateChatHistoryDisplay();
          showToast("Chat history cleared!");
        }
      }

      function viewFullConversation(id) {
        if (!CURRENT_USER) return;
        
        const conversation = CHAT_HISTORY.find(item => item.id === id);
        if (!conversation) return;
        
        const modalContent = `
          <div class="modal-header">
            <div>
              <h3 class="font-senorita text-lg text-cyan-400">Conversation Details</h3>
              <p class="text-sm text-gray-400">${conversation.date}  ${conversation.timestamp}</p>
            </div>
            <button onclick="closeModal()" class="text-gray-500 hover:text-white">
              <i data-lucide="x" class="w-5 h-5"></i>
            </button>
          </div>
          <div class="modal-content">
            <div class="mb-6">
              <div class="flex items-center gap-2 mb-2">
                <i data-lucide="user" class="w-4 h-4 text-cyan-400"></i>
                <strong class="text-cyan-400">Your Query:</strong>
              </div>
              <div class="p-4 bg-black/30 rounded-lg border border-cyan-500/20">
                ${conversation.user}
              </div>
            </div>
            
            <div>
              <div class="flex items-center gap-2 mb-2">
                <i data-lucide="bot" class="w-4 h-4 text-purple-400"></i>
                <strong class="text-purple-400">AI Response:</strong>
              </div>
              <div class="p-4 bg-black/30 rounded-lg border border-purple-500/20 whitespace-pre-wrap max-h-[300px] overflow-y-auto">
                ${conversation.bot}
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button onclick="copyFullConversation(${id})" class="modal-action-btn modal-copy-btn">
              <i data-lucide="copy" class="w-4 h-4 mr-2"></i>
              Copy Full Conversation
            </button>
            <button onclick="closeModal()" class="modal-action-btn modal-close-btn">
              <i data-lucide="x" class="w-4 h-4 mr-2"></i>
              Close
            </button>
          </div>
        `;
        
        showModal(modalContent);
      }

      function copyConversation(id) {
        if (!CURRENT_USER) return;
        
        const conversation = CHAT_HISTORY.find(item => item.id === id);
        if (!conversation) return;
        
        const textToCopy = `You: ${conversation.user}\n\nAI: ${conversation.bot}`;
        navigator.clipboard.writeText(textToCopy);
        showToast("Conversation copied to clipboard!");
      }

      function copyFullConversation(id) {
        if (!CURRENT_USER) return;
        
        const conversation = CHAT_HISTORY.find(item => item.id === id);
        if (!conversation) return;
        
        const textToCopy = `Conversation from ${conversation.date} ${conversation.timestamp}\n\nYou: ${conversation.user}\n\nAI Response:\n${conversation.bot}`;
        navigator.clipboard.writeText(textToCopy);
        showToast("Full conversation copied to clipboard!");
        closeModal();
      }

      function getTaskBadgeClass(taskType) {
        const badgeMap = {
          'pitch_deck': 'task-badge-cyan',
          'financial_model': 'task-badge-purple',
          'market_analysis': 'task-badge-green',
          'business_strategy': 'task-badge-yellow',
          'business_plan': 'task-badge-pink',
          'code': 'task-badge-orange',
          'general': 'task-badge-blue'
        };
        return badgeMap[taskType] || 'task-badge-blue';
      }

      function getTaskDisplayName(taskType) {
        const nameMap = {
          'pitch_deck': 'PITCH DECK',
          'financial_model': 'FINANCIAL MODEL',
          'market_analysis': 'MARKET ANALYSIS',
          'business_strategy': 'BUSINESS STRATEGY',
          'business_plan': 'BUSINESS PLAN',
          'code': 'TECHNICAL CODE',
          'general': 'GENERAL'
        };
        return nameMap[taskType] || 'GENERAL';
      }

      function showModal(content) {
        // Remove existing modal
        if (ACTIVE_MODAL) {
          document.body.removeChild(ACTIVE_MODAL);
        }
        
        ACTIVE_MODAL = document.createElement('div');
        ACTIVE_MODAL.className = 'modal-overlay';
        ACTIVE_MODAL.innerHTML = `
          <div class="modal-container">
            ${content}
          </div>
        `;
        
        document.body.appendChild(ACTIVE_MODAL);
        lucide.createIcons();
        
        // Close modal when clicking outside
        ACTIVE_MODAL.addEventListener('click', function(e) {
          if (e.target === ACTIVE_MODAL) {
            closeModal();
          }
        });
        
        // Close with Escape key
        document.addEventListener('keydown', function(e) {
          if (e.key === 'Escape' && ACTIVE_MODAL) {
            closeModal();
          }
        });
      }

      function closeModal() {
        if (ACTIVE_MODAL) {
          document.body.removeChild(ACTIVE_MODAL);
          ACTIVE_MODAL = null;
        }
      }

      /* SATISFACTION ORB FUNCTIONS */
      let CURRENT_SATISFACTION = 0;
      let SATISFACTION_METRICS = {
        relevance: 0,
        completeness: 0,
        businessValue: 0
      };

      function updateSatisfactionOrb(percentage, metrics = null) {
        const radius = 40;
        const circumference = 2 * Math.PI * radius;
        const strokeDashoffset = circumference - (percentage / 100) * circumference;
        
        const progressCircle = document.getElementById('satisfaction-progress');
        const percentageText = document.getElementById('satisfaction-percentage');
        const labelText = document.getElementById('satisfaction-label');
        
        // Update circle progress
        progressCircle.style.strokeDashoffset = strokeDashoffset;
        percentageText.textContent = `${percentage}%`;
        
        // Update color based on satisfaction level
        progressCircle.className = 'satisfaction-orb-progress';
        if (percentage >= 90) {
          progressCircle.classList.add('satisfaction-level-excellent');
          labelText.textContent = 'EXCELLENT';
        } else if (percentage >= 75) {
          progressCircle.classList.add('satisfaction-level-good');
          labelText.textContent = 'GOOD';
        } else if (percentage >= 50) {
          progressCircle.classList.add('satisfaction-level-average');
          labelText.textContent = 'AVERAGE';
        } else {
          progressCircle.classList.add('satisfaction-level-poor');
          labelText.textContent = 'NEEDS WORK';
        }
        
        // Update metrics if provided
        if (metrics) {
          SATISFACTION_METRICS = { ...metrics };
          updateSatisfactionMetrics();
        }
        
        CURRENT_SATISFACTION = percentage;
      }

      function updateSatisfactionMetrics() {
        document.getElementById('metric-relevance').textContent = `${SATISFACTION_METRICS.relevance}%`;
        document.getElementById('metric-completeness').textContent = `${SATISFACTION_METRICS.completeness}%`;
        document.getElementById('metric-business').textContent = `${SATISFACTION_METRICS.businessValue}%`;
        
        document.getElementById('metric-relevance-bar').style.width = `${SATISFACTION_METRICS.relevance}%`;
        document.getElementById('metric-completeness-bar').style.width = `${SATISFACTION_METRICS.completeness}%`;
        document.getElementById('metric-business-bar').style.width = `${SATISFACTION_METRICS.businessValue}%`;
      }

      function calculateSatisfactionMetrics(responseType, responseQuality) {
        // Simulate metrics based on response type and quality
        const metrics = {
          relevance: Math.min(100, 70 + Math.floor(Math.random() * 35)),
          completeness: Math.min(100, 65 + Math.floor(Math.random() * 40)),
          businessValue: Math.min(100, 75 + Math.floor(Math.random() * 30))
        };
        
        // Adjust based on response type
        if (responseType.includes('pitch') || responseType.includes('deck')) {
          metrics.businessValue = Math.min(100, metrics.businessValue + 10);
        } else if (responseType.includes('financial') || responseType.includes('model')) {
          metrics.relevance = Math.min(100, metrics.relevance + 15);
        } else if (responseType.includes('code') || responseType.includes('technical')) {
          metrics.completeness = Math.min(100, metrics.completeness + 10);
        }
        
        // Calculate overall satisfaction (weighted average)
        const overall = Math.round(
          (metrics.relevance * 0.4) + 
          (metrics.completeness * 0.3) + 
          (metrics.businessValue * 0.3)
        );
        
        return {
          overall,
          metrics
        };
      }

      // Initialize satisfaction orb
      updateSatisfactionOrb(0);

      /* Quick Access Toolbar Functions */
      function toggleToolbar() {
        const toolbar = document.getElementById('quick-access-toolbar');
        if (toolbar.style.display === 'flex') {
          toolbar.style.display = 'none';
        } else {
          toolbar.style.display = 'flex';
          // Refresh icons
          lucide.createIcons();
          
          // On mobile, add close button at bottom
          if (window.innerWidth <= 768) {
            const closeBtn = document.createElement('button');
            closeBtn.className = 'mt-4 p-4 bg-cyan-900/30 text-cyan-400 rounded-xl font-bold w-full';
            closeBtn.innerHTML = '<i data-lucide="x"></i> Close Toolbar';
            closeBtn.onclick = toggleToolbar;
            
            // Check if close button already exists
            if (!toolbar.querySelector('.mobile-close-btn')) {
              closeBtn.classList.add('mobile-close-btn');
              toolbar.appendChild(closeBtn);
              lucide.createIcons();
            }
          }
        }
      }

      // Close toolbar when clicking outside
      document.addEventListener('click', function(event) {
        const toolbar = document.getElementById('quick-access-toolbar');
        const toggleBtn = document.querySelector('.quick-access-toggle');
        
        if (toolbar && toolbar.style.display === 'flex') {
          if (!toolbar.contains(event.target) && !toggleBtn.contains(event.target)) {
            toolbar.style.display = 'none';
          }
        }
      });

      /* Business Quick Prompts */
      function setBusinessPrompt(type) {
        const prompts = {
          pitch: "Create an investor pitch deck for my SaaS startup that helps restaurants manage online orders",
          financial: "Create a 3-year financial model for an e-commerce business selling eco-friendly products",
          market: "Analyze the market for AI-powered educational tools for college students",
          strategy: "Develop a business strategy for a mobile app that connects freelance designers with clients",
          plan: "Write a comprehensive business plan for a subscription-based meal prep service",
          code: "Write Python code for a customer dashboard that shows sales analytics and user metrics"
        };
        
        document.getElementById('user-input').value = prompts[type];
        document.getElementById('user-input').focus();
        showToast(`Loaded ${type.replace('_', ' ')} template`);
        updateEmotion('thinking', '', 'Template loaded...');
      }

      /* Toast Notification */
      function showToast(message) {
        // Remove existing toast
        const existingToast = document.querySelector('.toast');
        if (existingToast) existingToast.remove();
        
        const toast = document.createElement('div');
        toast.className = 'toast';
        toast.innerHTML = `
          <i data-lucide="check-circle" class="text-green-400"></i>
          <span>${message}</span>
        `;
        document.body.appendChild(toast);
        
        lucide.createIcons();
        
        setTimeout(() => {
          toast.style.opacity = '0';
          toast.style.transform = 'translateY(20px)';
          setTimeout(() => toast.remove(), 300);
        }, 2000);
      }

      /* Export Function */
      function exportToDoc() {
        if (!FULL_OUTPUT) {
          showToast("No content to export!");
          return;
        }
        
        const content = FULL_OUTPUT;
        const blob = new Blob([content], { type: 'text/plain' });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `I2P_Business_${new Date().toISOString().split('T')[0]}.txt`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        window.URL.revokeObjectURL(url);
        showToast("Document exported!");
        updateEmotion('happy', '', 'Document exported!');
      }

      /* EMOTION MANAGEMENT SYSTEM */
      const EMOTION_STATES = {
        ready: {
          emoji: '',
          color: 'emotion-happy',
          animation: 'emoji-pulse',
          status: '_SYSTEM_IDLE...',
          text: 'EMOTION: READY'
        },
        thinking: {
          emoji: '',
          color: 'emotion-thinking',
          animation: 'emoji-spin',
          status: 'THINKING...',
          text: 'EMOTION: THINKING'
        },
        processing: {
          emoji: '',
          color: 'emotion-processing',
          animation: 'emoji-spin',
          status: 'PROCESSING_REQUEST...',
          text: 'EMOTION: PROCESSING'
        },
        analyzing: {
          emoji: '',
          color: 'emotion-analyzing',
          animation: 'emoji-pulse',
          status: 'ANALYZING_BUSINESS_NEEDS...',
          text: 'EMOTION: ANALYZING'
        },
        creative: {
          emoji: '',
          color: 'emotion-creative',
          animation: 'emoji-glow',
          status: 'GENERATING_CREATIVE_CONTENT...',
          text: 'EMOTION: CREATIVE'
        },
        busy: {
          emoji: '',
          color: 'emotion-busy',
          animation: 'emoji-spin',
          status: 'WORKING_HARD...',
          text: 'EMOTION: BUSY'
        },
        completed: {
          emoji: '',
          color: 'emotion-completed',
          animation: 'emoji-bounce',
          status: 'TASK_COMPLETED',
          text: 'EMOTION: COMPLETED'
        },
        error: {
          emoji: '',
          color: 'emotion-error',
          animation: 'emoji-shake',
          status: 'ERROR_OCCURRED',
          text: 'EMOTION: ERROR'
        },
        happy: {
          emoji: '',
          color: 'emotion-happy',
          animation: 'emoji-bounce',
          status: 'SUCCESSFUL',
          text: 'EMOTION: HAPPY'
        },
        confused: {
          emoji: '',
          color: 'emotion-busy',
          animation: 'emoji-shake',
          status: 'NEED_MORE_INFO...',
          text: 'EMOTION: CONFUSED'
        },
        excited: {
          emoji: '',
          color: 'emotion-creative',
          animation: 'emoji-pulse',
          status: 'EXCITED_TO_HELP!',
          text: 'EMOTION: EXCITED'
        }
      };

      function updateEmotion(state, customEmoji = null, customStatus = null) {
        const emotionState = EMOTION_STATES[state] || EMOTION_STATES.ready;
        const emojiContainer = document.getElementById('emoji-container');
        const emojiIcon = document.getElementById('emoji-icon');
        const emotionText = document.getElementById('emotion-text');
        const statusText = document.getElementById('status-text');
        
        // Remove all emotion classes
        Object.values(EMOTION_STATES).forEach(emotion => {
          emojiContainer.classList.remove(emotion.color, 'emoji-pulse', 'emoji-bounce', 'emoji-spin', 'emoji-shake', 'emoji-glow');
        });
        
        // Apply new emotion
        emojiIcon.textContent = customEmoji || emotionState.emoji;
        emojiContainer.classList.add(emotionState.color, emotionState.animation);
        emotionText.textContent = customStatus ? `EMOTION: ${customStatus}` : emotionState.text;
        emotionText.className = `text-[9px] mt-2 font-mono tracking-tighter uppercase ${emotionState.color}`;
        
        if (statusText && !customStatus) {
          statusText.textContent = emotionState.status;
        } else if (customStatus) {
          statusText.textContent = customStatus;
        }
      }

      // Initialize with ready emotion
      updateEmotion('ready');

      /* AI CORE LOGIC */
      let FULL_OUTPUT = "";
      let LAST_INPUT = "";
      let CURRENT_PHASES = [];
      let CURRENT_TASK_TYPE = "";

      // Function to parse content into phases
      function parseContentIntoPhases(content) {
        const phases = [];
        const lines = content.split('\n');
        let currentPhase = { title: '', content: '' };
        let phaseNumber = 1;
        
        // Try to detect natural sections in the content
        const sectionPatterns = [
          /^(code|implementation|program):?$/i,
          /^(explanation|description|explain):?$/i,
          /^(output|result|sample output):?$/i,
          /^(algorithm|approach|methodology):?$/i,
          /^(advantages|benefits|pros):?$/i,
          /^(disadvantages|limitations|cons):?$/i,
          /^(steps|procedure|process):?$/i,
          /^(architecture|design|structure):?$/i,
          /^(features|functionality|capabilities):?$/i,
          /^(requirements|prerequisites|dependencies):?$/i
        ];
        
        for (let i = 0; i < lines.length; i++) {
          const line = lines[i].trim();
          
          // Check if this line indicates a new phase/section
          let isNewPhase = false;
          let phaseTitle = '';
          
          for (const pattern of sectionPatterns) {
            if (pattern.test(line)) {
              isNewPhase = true;
              phaseTitle = line.replace(/[:.]$/, '').trim();
              break;
            }
          }
          
          // Also check for numbered sections like "1.", "2.", etc.
          if (/^\d+[\.\)]\s+/.test(line)) {
            isNewPhase = true;
            phaseTitle = line.replace(/^\d+[\.\)]\s+/, '').trim();
          }
          
          // Check for headers with colons
          if (line.includes(':') && line.length < 100 && !line.includes('http')) {
            const parts = line.split(':');
            if (parts[0].length < 50 && parts[1]) {
              isNewPhase = true;
              phaseTitle = parts[0].trim();
            }
          }
          
          if (isNewPhase && currentPhase.content.trim()) {
            // Save the current phase
            if (!currentPhase.title) {
              currentPhase.title = `Phase ${phaseNumber}`;
            }
            phases.push({...currentPhase});
            phaseNumber++;
            
            // Start new phase
            currentPhase = {
              title: phaseTitle || `Phase ${phaseNumber}`,
              content: ''
            };
          } else {
            // Add line to current phase content
            if (currentPhase.content) {
              currentPhase.content += '\n' + line;
            } else {
              currentPhase.content = line;
            }
            
            // If this line was a phase title, don't add it to content
            if (isNewPhase) {
              currentPhase.content = '';
              if (!currentPhase.title) {
                currentPhase.title = phaseTitle;
              }
            }
          }
        }
        
        // Add the last phase
        if (currentPhase.content.trim()) {
          if (!currentPhase.title) {
            currentPhase.title = `Phase ${phaseNumber}`;
          }
          phases.push({...currentPhase});
        }
        
        // If no phases were detected, create a single phase
        if (phases.length === 0 && content.trim()) {
          phases.push({
            title: "Phase 01: Business Response",
            content: content
          });
        }
        
        return phases;
      }

      // Function to display phases with business styling
      function displayPhases(phases, taskType) {
        const phaseContainer = document.getElementById("phase-container");
        phaseContainer.innerHTML = '';
        
        CURRENT_TASK_TYPE = taskType || '';
        
        // Add business header if applicable
        const businessTasks = ['business_strategy', 'pitch_deck', 'market_analysis', 'financial_model', 'business_plan'];
        if (businessTasks.includes(taskType)) {
          const header = document.createElement('div');
          header.className = 'tech-card p-4 mb-4 border-l-4 border-cyan-500';
          header.innerHTML = `
            <div class="flex items-center gap-3">
              <span class="text-xl"></span>
              <div>
                <div class="font-senorita text-sm text-cyan-400">BUSINESS ADVISORY MODE</div>
                <div class="text-xs text-gray-400">Professional business analysis activated</div>
              </div>
            </div>
          `;
          phaseContainer.appendChild(header);
        }
        
        // Display phases
        phases.forEach((phase, index) => {
          const phaseElement = document.createElement("div");
          phaseElement.className = "phase-section";
          
          phaseElement.innerHTML = `
            <div class="phase-header">
              <div class="phase-number">${index + 1}</div>
              <div class="phase-title">${phase.title}</div>
            </div>
            <div class="phase-content">${phase.content.replace(/\n/g, '<br>')}</div>
          `;
          
          phaseContainer.appendChild(phaseElement);
          
          // Add divider if not the last phase
          if (index < phases.length - 1) {
            const divider = document.createElement("div");
            divider.className = "phase-divider";
            phaseContainer.appendChild(divider);
          }
        });
        
        CURRENT_PHASES = phases;
      }

      async function generateResponse(isContinue = false) {
        const inputBox = document.getElementById("user-input");
        const workspace = document.getElementById("dynamic-workspace");
        const progress = document.getElementById("progress-bar");
        const percent = document.getElementById("percent");
        const phaseTitle = document.getElementById("dynamic-phase-title");
        const phaseContainer = document.getElementById("phase-container");

        const input = isContinue ? LAST_INPUT : inputBox.value.trim();
        if (!input) {
          updateEmotion('confused', '', 'Please enter your business request!');
          showToast("Please enter your business request!");
          return;
        }

        inputBox.disabled = true;
        workspace.classList.remove("hidden-state");
        workspace.classList.add("visible-state");

        if (!isContinue) {
          FULL_OUTPUT = "";
          phaseContainer.innerHTML = '<div class="text-gray-400 text-center py-10">Analyzing business request...</div>';
          LAST_INPUT = input;
          
          // Update emotion based on input type
          const low = input.toLowerCase();
          if (low.includes("pitch") || low.includes("investor") || low.includes("deck")) {
            updateEmotion('excited', '', 'PREPARING PITCH DECK...');
            phaseTitle.innerText = "PHASE: INVESTOR PITCH DEVELOPMENT";
          } else if (low.includes("financial") || low.includes("revenue") || low.includes("cost")) {
            updateEmotion('thinking', '', 'CALCULATING FINANCIALS...');
            phaseTitle.innerText = "PHASE: FINANCIAL MODELING";
          } else if (low.includes("market") || low.includes("competitor") || low.includes("analysis")) {
            updateEmotion('analyzing', '', 'ANALYZING MARKET...');
            phaseTitle.innerText = "PHASE: MARKET ANALYSIS";
          } else if (low.includes("business") || low.includes("strategy") || low.includes("plan")) {
            updateEmotion('creative', '', 'DEVELOPING STRATEGY...');
            phaseTitle.innerText = "PHASE: BUSINESS STRATEGY";
          } else if (low.includes("code") || low.includes("program") || low.includes("technical")) {
            updateEmotion('processing', '', 'WRITING CODE...');
            phaseTitle.innerText = "PHASE: TECHNICAL ARCHITECTURE";
          } else if (low.includes("idea") || low.includes("concept") || low.includes("startup")) {
            updateEmotion('creative', '', 'GENERATING IDEAS...');
            phaseTitle.innerText = "PHASE: INNOVATION STRATEGY";
          } else {
            updateEmotion('thinking', '', 'ANALYZING REQUEST...');
            phaseTitle.innerText = "PHASE: BUSINESS INTELLIGENCE";
          }
          
          document.getElementById("file-upload").value = "";
          document.getElementById("file-indicator").classList.add("hidden");
        } else {
          updateEmotion('busy', '', 'CONTINUING_RESPONSE...');
        }

        let count = 0;
        progress.style.width = "0%";
        const timer = setInterval(() => {
          if (count < 95) {
            count++;
            percent.innerText = `${count}%`;
            progress.style.width = `${count}%`;
          }
        }, 30);

        try {
          const res = await fetch("/chat", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ message: input, continue: isContinue }),
          });

          const data = await res.json();
          if (!data.tasks) throw new Error("Empty response");

          const newText = Object.values(data.tasks).map((t) => t.output).join("\n\n");

          if (isContinue) {
            FULL_OUTPUT += "\n" + newText;
          } else {
            FULL_OUTPUT = newText;
          }

          // Parse and display content in phases
          const phases = parseContentIntoPhases(FULL_OUTPUT);
          displayPhases(phases, data.primary_task);
          
          // Calculate and update satisfaction metrics
          const satisfactionData = calculateSatisfactionMetrics(
            data.primary_task || "general", 
            "good"
          );
          updateSatisfactionOrb(satisfactionData.overall, satisfactionData.metrics);
          
          // Add to chat history (only if user is logged in)
          if (!isContinue && CURRENT_USER) {
            addToChatHistory(input, FULL_OUTPUT, data.primary_task || "general");
          } else if (!isContinue && !CURRENT_USER) {
            showToast("Login to save this conversation to your history");
          }
          
          clearInterval(timer);
          progress.style.width = "100%";
          percent.innerText = "100%";

          if (data.completed) {
            updateEmotion('completed', '', 'BUSINESS_ANALYSIS_COMPLETE');
            document.getElementById("continue-btn").classList.add("hidden");
          } else {
            updateEmotion('busy', '', 'OUTPUT_TRUNCATED_CLICK_CONTINUE');
            document.getElementById("continue-btn").classList.remove("hidden");
          }
        } catch (err) {
          clearInterval(timer);
          updateEmotion('error', '', 'CONNECTION_ERROR');
          updateSatisfactionOrb(30); // Low satisfaction on error
          phaseContainer.innerHTML = `
            <div class="text-center py-10">
              <div class="text-red-400 mb-2"> Connection error with Business AI backend.</div>
              <div class="text-gray-400 text-sm">Please check your connection and try again.</div>
            </div>`;
          console.error(err);
        }

        inputBox.disabled = false;
        if (!isContinue) inputBox.value = "";
      }

      function copyFullOutput() {
        if (!FULL_OUTPUT) {
          updateEmotion('confused', '', 'NOTHING_TO_COPY');
          showToast("Nothing to copy!");
          return;
        }
        navigator.clipboard.writeText(FULL_OUTPUT);
        updateEmotion('happy', '', 'COPIED_TO_CLIPBOARD');
        showToast("Business response copied to clipboard!");
      }

      // Listener for File Upload UI
      document.getElementById('file-upload').addEventListener('change', function(e) {
          const fileName = e.target.files[0]?.name;
          const indicator = document.getElementById('file-indicator');
          const nameSpan = document.getElementById('file-name');

          if (fileName) {
              nameSpan.innerText = fileName;
              indicator.classList.remove('hidden');
              updateEmotion('happy', '', 'FILE_ATTACHED');
          } else {
              indicator.classList.add('hidden');
          }
      });

      // Enter key support for input
      document.getElementById('user-input').addEventListener('keypress', function(e) {
          if (e.key === 'Enter') {
              generateResponse(false);
          }
      });

      // Add random emotion changes when idle (every 30 seconds)
      setInterval(() => {
        if (!inputBox.disabled && !FULL_OUTPUT) {
          const idleEmotions = ['ready', 'thinking', 'happy', 'excited'];
          const randomEmotion = idleEmotions[Math.floor(Math.random() * idleEmotions.length)];
          updateEmotion(randomEmotion);
        }
      }, 30000);

      /* =========================================== */
      /* MOBILE OPTIMIZATION FUNCTIONS */
      /* =========================================== */

      // Handle mobile-specific interactions
      function initMobileOptimizations() {
        // Disable custom cursor on touch devices
        if ('ontouchstart' in window || navigator.maxTouchPoints) {
          const cursor = document.getElementById('cursor');
          if (cursor) cursor.style.display = 'none';
          
          // Adjust touch interactions
          document.body.style.cursor = 'default';
        }
        
        // Prevent zoom on input focus for iOS
        document.addEventListener('touchstart', function() {}, {passive: true});
        
        // Better touch handling for buttons
        document.querySelectorAll('button, .tool-icon, [onclick]').forEach(btn => {
          btn.style.touchAction = 'manipulation';
        });
      }

      // Initialize everything on load
      window.addEventListener('DOMContentLoaded', function() {
        initAuth();
        initMobileOptimizations();
        
        // Adjust layout on resize
        window.addEventListener('resize', function() {
          // Re-initialize mobile optimizations on resize
          initMobileOptimizations();
        });
      });
    </script>
  </body>
</html>